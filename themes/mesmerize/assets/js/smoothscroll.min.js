!function(t){"#page-top"===window.location.hash&&i("",5);var o={items:{},eachCategory:function(t){for(var o in this.items)this.items.hasOwnProperty(o)&&t(this.items[o])},addItem:function(t,o){this.items[t]||(this.items[t]=[]),this.items[t].push(o)},all:function(){var t=[];for(var o in this.items)this.items.hasOwnProperty(o)&&(t=t.concat(this.items[o]));return t}},n=!1;function e(o){var n=isNaN(parseFloat(o.options.offset))?o.options.offset.call(o.target):o.options.offset;return o.target.offset().top-n-t("body").offset().top}function i(t,o){t===location.hash.replace("#","")||"page-top"===t&&""===location.hash.replace("#","")||setTimeout(function(){t=t?"page-top"===t?" ":"#"+t:" ",history&&history.replaceState&&history.replaceState({},"",t)},o||100)}function a(o){if(!n){n=!0;var a=e(o);t("html, body").animate({scrollTop:a},{easing:"linear",complete:function(){var a=e(o);t("html, body").animate({scrollTop:a},{easing:"linear",duration:100,complete:function(){n=!1,i(o.id,5)}})}})}}function r(o){var n=(o.attr("href")||"").split("#").pop(),e=function(t){var o=jQuery(t)[0].href||"",n="#";try{var e=new window.URL(o);n=[e.protocol,"//",e.host,e.pathname].join("")}catch(t){n=o.split("?")[0].split("#")[0]}return n}(o),i=null,a=[location.protocol,"//",location.host,location.pathname].join("");if(e.length&&e!==a)return i;if(n.trim().length)try{i=t('[id="'+n+'"]')}catch(t){console.log("error scrollSpy",t)}return i&&i.length?i:null}function l(){o.eachCategory(function(t){var o=t.sort(function(t,o){return t.target.offset().top-o.target.offset().top}),n=o.filter(function(t){return t.target.offset().top<=window.scrollY+.25*window.innerHeight}).pop();o.forEach(function(t){n&&t.element.is(n.element)?(i(t.id,5),t.options.onChange.call(t.element)):t.options.onLeave.call(t.element)})})}t.fn.smoothScrollAnchor=function(o){var n=t(this);o=jQuery.extend({offset:0},o),n.each(function(){var n=t(this),e=o.target||r(n);if(e&&e.length){var i={element:n,options:o,target:e,targetSel:o.targetSel||'[id="'+e.attr("id").trim()+'"]',id:(e.attr("id")||"").trim()};n.off("click tap").on("click tap",function(o){t(this).data("skip-smooth-scroll")||(o.preventDefault(),t(this).data("allow-propagation")||o.stopPropagation(),a(i),i.clickCallback&&i.clickCallback.call(this,o))})}})},t.fn.scrollSpy=function(n){var e=t(this),i="spy-"+parseInt(Date.now()*Math.random());e.each(function(){var e=t(this);if(n=jQuery.extend({onChange:function(){},onLeave:function(){},clickCallback:function(){},smoothScrollAnchor:!1,offset:0},n),e.is("a")&&-1!==(e.attr("href")||"").indexOf("#")){var a=r(e);if(a){var l={element:e,options:n,target:a,targetSel:'[id="'+a.attr("id").trim()+'"]',id:a.attr("id").trim()};o.addItem(i,l),e.data("scrollSpy",l),n.smoothScrollAnchor&&e.smoothScrollAnchor({offset:n.offset})}}})},t(window).scroll(l),t(window).bind("smoothscroll.update",l),t(function(){var n=window.location.hash.replace("#",""),e=o.all().filter(function(t){return t.targetSel==='[id="'+n.trim()+'"]'});t(window).on("load",function(){e.length&&a(e[0]),l()})})}(jQuery);
