wp.customize.controlConstructor["kirki-checkbox"]=wp.customize.Control.extend({ready:function(){"use strict";var t=this,e=t.setting._value;this.container.on("change","input",function(){e=!!jQuery(this).is(":checked"),t.setting.set(e)})}}),wp.customize.controlConstructor["kirki-color-palette"]=wp.customize.Control.extend({ready:function(){"use strict";var t=this;this.container.on("click","input",function(){t.setting.set(jQuery(this).val())})}}),kirki.kirkiGetColorPalette=function(){return[]},kirki.kirkiGetColorPicker=function(t,e,i){if(jQuery.fn.spectrum){var n=t.data("alpha"),r="postMessage"===t.data("transport");function s(t){jQuery(this).data("alpha")?e(t.toRgbString()):e(t.toHexString())}t.off("change").on("change",function(t){t.preventDefault(),t.stopPropagation(),s.call(this,jQuery(this).spectrum("get"))}),t.spectrum({instant:!!i&&i.instant,preferredFormat:n?"rgb":"hex",showInput:!0,showPalette:!0,color:t[0].getAttribute("value"),hideAfterPaletteSelect:!1,showSelectionPalette:!1,showAlpha:n,change:s,hide:s,move:r?s:function(){},beforeShow:function(){t.spectrum("option","palette",kirki.kirkiGetColorPalette())}})}else t.wpColorPicker(i),t.wpColorPicker({change:function(t,i){e(i.color.toCSS())}})},wp.customize.controlConstructor["kirki-color"]=wp.customize.Control.extend({ready:function(){"use strict";var t=this,e=this.container.find(".kirki-color-control");e.data("transport",t.setting.transport),void 0!==t.params.choices&&kirki.kirkiGetColorPicker(e,function(e){setTimeout(function(){t.setting.set(e)},100)},t.params.choices)}}),wp.customize.controlConstructor["kirki-dashicons"]=wp.customize.Control.extend({ready:function(){"use strict";var t=this;this.container.on("click","input",function(){t.setting.set(jQuery(this).val())})}}),wp.customize.controlConstructor["kirki-date"]=wp.customize.Control.extend({ready:function(){"use strict";var t=this,e=t.selector+" input.datepicker";jQuery(e).datepicker(),this.container.on("change keyup paste","input.datepicker",function(){t.setting.set(jQuery(this).val())})}}),wp.customize.controlConstructor["kirki-dimension"]=wp.customize.Control.extend({ready:function(){"use strict";var t,e=this;kirkiNotifications(e.id,"kirki-dimension",e.params.kirkiConfig);var i=_.debounce(function(i){t=jQuery(i.target).val(),e.setting.set(t)},600);this.container.on("change keyup paste","input",i)}}),wp.customize.controlConstructor["kirki-dropdown-pages"]=wp.customize.Control.extend({ready:function(){"use strict";var t=this,e=this.container.find("select");jQuery(e).selectize(),this.container.on("change","select",function(){t.setting.set(jQuery(this).val())})}}),wp.customize.controlConstructor["kirki-editor"]=wp.customize.Control.extend({ready:function(){"use strict";var t,e,i=this,n=i.container.find("textarea"),r=i.container.find(".toggle-editor"),s=(jQuery("#kirki_editor_pane"),jQuery("#kirki_editor_pane textarea.wp-editor-area"));jQuery(window).load(function(){var o=tinyMCE.get("kirki-editor");r.html(window.kirki.l10n[i.params.kirkiConfig]["open-editor"]),r.on("click",function(){i.toggleEditor(),i.changeButton(),i.setEditorContent(o),i.previewHeight()}),o&&o.onChange.add(function(r,s){r.save(),e=o.getContent(),clearTimeout(t),t=setTimeout(function(){n.val(e).trigger("change"),wp.customize.instance(i.getEditorWrapperSetting()).set(e)},500)}),s.on("change keyup paste",function(){wp.customize.instance(i.getEditorWrapperSetting()).set(jQuery(this).val())})})},changeButton:function(){"use strict";var t=this;jQuery("#kirki_editor_pane");jQuery(".customize-control-kirki-editor .toggle-editor").html(window.kirki.l10n[t.params.kirkiConfig]["switch-editor"]),!1!==t.getEditorWrapperSetting()?(jQuery(".customize-control-kirki-editor .toggle-editor").html(window.kirki.l10n[t.params.kirkiConfig]["switch-editor"]),jQuery("#customize-control-"+t.getEditorWrapperSetting()+" .toggle-editor").html(window.kirki.l10n[t.params.kirkiConfig]["close-editor"])):jQuery(".customize-control-kirki-editor .toggle-editor").html(window.kirki.l10n[t.params.kirkiConfig]["open-editor"])},toggleEditor:function(){"use strict";var t=this,e=jQuery("#kirki_editor_pane");t.getEditorWrapperSetting()&&t.id===t.getEditorWrapperSetting()?(e.removeClass(),e.addClass("hide")):(e.removeClass(),e.addClass(t.id))},setEditorContent:function(t){"use strict";jQuery("#kirki_editor_pane");t.setContent(this.setting._value)},getEditorWrapperSetting:function(){"use strict";return!jQuery("#kirki_editor_pane").hasClass("hide")&&(!!jQuery("#kirki_editor_pane").attr("class")&&jQuery("#kirki_editor_pane").attr("class"))},previewHeight:function(){jQuery("#kirki_editor_pane").hasClass("hide")?jQuery("#customize-preview").hasClass("is-kirki-editor-open")&&jQuery("#customize-preview").removeClass("is-kirki-editor-open"):jQuery("#customize-preview").hasClass("is-kirki-editor-open")||jQuery("#customize-preview").addClass("is-kirki-editor-open")}}),wp.customize.controlConstructor["kirki-generic"]=wp.customize.Control.extend({ready:function(){"use strict";var t=this;this.container.on("change keyup paste",t.params.choices.element,_.debounce(function(){t.setting.set(jQuery(this).val())},600))}}),wp.customize.controlConstructor["kirki-multicheck"]=wp.customize.Control.extend({ready:function(){"use strict";var t=this;t.container.on("change","input",function(){var e=[],i=0;jQuery.each(t.params.choices,function(n,r){t.container.find('input[value="'+n+'"]').is(":checked")&&(e[i]=n,i++)}),t.setting.set(e)})}}),wp.customize.controlConstructor["kirki-multicolor"]=wp.customize.Control.extend({ready:function(){"use strict";var t,e,i=this,n=i.params.choices,r=Object.keys(n),s=this.params.value,o=i.container.find(".iris-target"),a=0;function c(t,e,i){var n=t.container.find(".multicolor-index-"+i);n.wpColorPicker({target:o[0],change:function(r,s){setTimeout(function(){e[i]=n.val(),t.setValue(e,!1),t.container.find(".multicolor-index-"+i).trigger("change")},100)}})}for(this.settingField=this.container.find("[data-customize-setting-link]").first();a<Object.keys(n).length;)c(this,s,r[a]),t=i.container.find(".wp-picker-container .wp-picker-input-wrap"),e=i.container.find(".wp-picker-container .wp-picker-holder"),jQuery(t[0]).detach().appendTo(o[0]),jQuery(e[0]).detach().appendTo(o[0]),a++},setValue:function(t,e){"use strict";var i={};_.each(t,function(t,e){i[e]=t}),this.setting.set(i),e&&this.settingField.trigger("change")}}),wp.customize.controlConstructor["kirki-number"]=wp.customize.Control.extend({ready:function(){"use strict";var t=this,e=this.container.find("input"),i=-99999,n=99999,r=1;void 0!==t.params.choices&&void 0!==t.params.choices.min&&(i=t.params.choices.min),void 0!==t.params.choices&&void 0!==t.params.choices.max&&(n=t.params.choices.max),void 0!==t.params.choices&&void 0!==t.params.choices.step&&(r=t.params.choices.step,"any"===t.params.choices.step&&(r="0.001")),jQuery(e).spinner({min:i,max:n,step:r});var s=void 0,o=_.debounce(function(){var i=jQuery(e).val();s!==i&&(s=i,t.setting.set(i))},600);this.container.on("mousedown keydown","input",function(){s=this.value}),this.container.on("change click keyup paste","input",o)}}),wp.customize.controlConstructor["kirki-palette"]=wp.customize.Control.extend({ready:function(){"use strict";var t=this;this.container.on("click","input",function(){t.setting.set(jQuery(this).val())})}}),wp.customize.controlConstructor["kirki-preset"]=wp.customize.Control.extend({ready:function(){"use strict";var t,e=this,i=this.container.find("select");jQuery(i).selectize(),this.container.on("change","select",function(){t=jQuery(this).val(),e.setting.set(t),jQuery.each(e.params.choices,function(e,i){t===e&&jQuery.each(i.settings,function(t,e){kirkiSetSettingValue(t,e)})}),wp.customize.previewer.refresh()})}}),wp.customize.controlConstructor["kirki-radio-buttonset"]=wp.customize.Control.extend({ready:function(){"use strict";var t=this;this.container.on("click","input",function(){t.setting.set(jQuery(this).val())})}}),wp.customize.controlConstructor["kirki-radio-image"]=wp.customize.Control.extend({ready:function(){"use strict";var t=this;this.container.on("click","input",function(){t.setting.set(jQuery(this).val())})}}),wp.customize.controlConstructor["kirki-radio"]=wp.customize.Control.extend({ready:function(){"use strict";var t=this;this.container.on("change","input",function(){t.setting.set(jQuery(this).val())})}});var RepeaterRow=function(t,e,i){"use strict";var n=this;this.rowIndex=t,this.container=e,this.label=i,this.header=this.container.find(".repeater-row-header"),this.header.on("click",function(){n.toggleMinimize()}),this.container.on("click",".repeater-row-remove",function(){n.remove()}),this.header.on("mousedown",function(){n.container.trigger("row:start-dragging")}),this.container.on("keyup change","input, select, textarea",function(t){n.container.trigger("row:update",[n.rowIndex,jQuery(t.target).data("field"),t.target])}),this.setRowIndex=function(t){this.rowIndex=t,this.container.attr("data-row",t),this.container.data("row",t),this.updateLabel()},this.toggleMinimize=function(){this.container.toggleClass("minimized"),this.header.find(".dashicons").toggleClass("dashicons-arrow-up").toggleClass("dashicons-arrow-down")},this.remove=function(){this.container.slideUp(300,function(){jQuery(this).detach()}),this.container.trigger("row:remove",[this.rowIndex])},this.updateLabel=function(){var t,e;"field"!==this.label.type||"function"!=typeof(t=this.container.find('.repeater-field [data-field="'+this.label.field+'"]')).val||""===(e=t.val())?this.header.find(".repeater-row-label").text(this.label.value+" "+(this.rowIndex+1)):this.header.find(".repeater-row-label").text(e)},this.updateLabel()};wp.customize.controlConstructor.repeater=wp.customize.Control.extend({__valueToSet:[],ready:function(){"use strict";var t,e,i=this,n=this.params.value;this.settingField=this.container.find("[data-customize-setting-link]").first(),this.repeaterFieldsContainer=this.container.find(".repeater-fields").first(),this.currentIndex=0,this.rows=[],t=!1,void 0!==this.params.choices.limit&&(t=!(0>=this.params.choices.limit)&&parseInt(this.params.choices.limit)),this.container.on("click","button.repeater-add",function(n){n.preventDefault(),(!t||i.currentIndex<t)&&((e=i.addRow()).toggleMinimize(),i.initColorPicker(),i.initDropdownPages(e)),t&&i.currentIndex>=t&&(jQuery(i.selector+" .limit").addClass("highlight"),jQuery(i.selector+" .repeater-add").hide())}),t&&t==n.length&&jQuery(i.selector+" .repeater-add").hide(),this.container.on("click",".repeater-row-remove",function(e){i.currentIndex--,(!t||i.currentIndex<t)&&(jQuery(i.selector+" .limit").removeClass("highlight"),jQuery(i.selector+" .repeater-add").show())}),this.container.on("click keypress",".repeater-field-image .upload-button,.repeater-field-cropped_image .upload-button,.repeater-field-upload .upload-button",function(t){t.preventDefault(),i.$thisButton=jQuery(this),i.openFrame(t)}),this.container.on("click keypress",".repeater-field-image .remove-button,.repeater-field-cropped_image .remove-button",function(t){t.preventDefault(),i.$thisButton=jQuery(this),i.removeImage(t)}),this.container.on("click keypress",".repeater-field-upload .remove-button",function(t){t.preventDefault(),i.$thisButton=jQuery(this),i.removeFile(t)}),this.repeaterTemplate=_.memoize(function(){var t={evaluate:/<#([\s\S]+?)#>/g,interpolate:/\{\{\{([\s\S]+?)\}\}\}/g,escape:/\{\{([^\}]+?)\}\}(?!\})/g,variable:"data"};return function(e){return _.template(i.container.find(".customize-control-repeater-content").first().html(),null,t)(e)}}),n.length&&_.each(n,function(t){e=i.addRow(t,!0),i.initColorPicker(),i.initDropdownPages(e,t)}),this.__valueToSet=n,this.setValue(n,!0),this.repeaterFieldsContainer.sortable({handle:".repeater-row-header",axis:"y",update:function(t,e){i.sort()}})},openFrame:function(t){"use strict";wp.customize.utils.isKeydownButNotEnterEvent(t)||(this.$thisButton.closest(".repeater-field").hasClass("repeater-field-cropped_image")?this.initCropperFrame():this.initFrame(),this.frame.open())},initFrame:function(){"use strict";var t=this.getMimeType();this.frame=wp.media({states:[new wp.media.controller.Library({library:wp.media.query({type:t}),multiple:!1,date:!1})]}),this.frame.on("select",this.onSelect,this)},initCropperFrame:function(){"use strict";var t=this.$thisButton.siblings("input.hidden-field").attr("data-field"),e=this.getMimeType();"string"==typeof t&&""!==t&&"object"==typeof this.params.fields[t]&&"cropped_image"===this.params.fields[t].type&&["width","height","flex_width","flex_height"].forEach(function(e,i){void 0!==this.params.fields[t][e]&&(this.params[e]=this.params.fields[t][e])}.bind(this)),this.frame=wp.media({button:{text:"Select and Crop",close:!1},states:[new wp.media.controller.Library({library:wp.media.query({type:e}),multiple:!1,date:!1,suggestedWidth:this.params.width,suggestedHeight:this.params.height}),new wp.media.controller.CustomizeImageCropper({imgSelectOptions:this.calculateImageSelectOptions,control:this})]}),this.frame.on("select",this.onSelectForCrop,this),this.frame.on("cropped",this.onCropped,this),this.frame.on("skippedcrop",this.onSkippedCrop,this)},onSelect:function(){"use strict";var t=this.frame.state().get("selection").first().toJSON();this.$thisButton.closest(".repeater-field").hasClass("repeater-field-upload")?this.setFileInRepeaterField(t):this.setImageInRepeaterField(t)},onSelectForCrop:function(){"use strict";var t=this.frame.state().get("selection").first().toJSON();this.params.width!==t.width||this.params.height!==t.height||this.params.flex_width||this.params.flex_height?this.frame.setState("cropper"):this.setImageInRepeaterField(t)},onCropped:function(t){"use strict";this.setImageInRepeaterField(t)},calculateImageSelectOptions:function(t,e){"use strict";var i,n,r,s=e.get("control"),o=!!parseInt(s.params.flex_width,10),a=!!parseInt(s.params.flex_height,10),c=t.get("width"),u=t.get("height"),l=parseInt(s.params.width,10),h=parseInt(s.params.height,10),d=l/h,p=c,f=u;return e.set("canSkipCrop",!s.mustBeCropped(o,a,l,h,c,u)),p/f>d?l=(h=f)*d:h=(l=p)/d,r={handles:!0,keys:!0,instance:!0,persistent:!0,imageWidth:c,imageHeight:u,x1:i=(p-l)/2,y1:n=(f-h)/2,x2:l+i,y2:h+n},!1===a&&!1===o&&(r.aspectRatio=l+":"+h),!1===a&&(r.maxHeight=h),!1===o&&(r.maxWidth=l),r},mustBeCropped:function(t,e,i,n,r,s){"use strict";return(!0!==t||!0!==e)&&((!0!==t||n!==s)&&((!0!==e||i!==r)&&((i!==r||n!==s)&&!(r<=i))))},onSkippedCrop:function(){"use strict";var t=this.frame.state().get("selection").first().toJSON();this.setImageInRepeaterField(t)},setImageInRepeaterField:function(t){"use strict";var e=this.$thisButton.closest(".repeater-field-image,.repeater-field-cropped_image");e.find(".kirki-image-attachment").html('<img src="'+t.url+'">').hide().slideDown("slow"),e.find(".hidden-field").val(t.id),this.$thisButton.text(this.$thisButton.data("alt-label")),e.find(".remove-button").show(),e.find("input, textarea, select").trigger("change"),this.frame.close()},setFileInRepeaterField:function(t){"use strict";var e=this.$thisButton.closest(".repeater-field-upload");e.find(".kirki-file-attachment").html('<span class="file"><span class="dashicons dashicons-media-default"></span> '+t.filename+"</span>").hide().slideDown("slow"),e.find(".hidden-field").val(t.id),this.$thisButton.text(this.$thisButton.data("alt-label")),e.find(".upload-button").show(),e.find(".remove-button").show(),e.find("input, textarea, select").trigger("change"),this.frame.close()},getMimeType:function(){"use strict";var t=this.$thisButton.siblings("input.hidden-field").attr("data-field");return"string"==typeof t&&""!==t&&"object"==typeof this.params.fields[t]&&"upload"===this.params.fields[t].type&&void 0!==this.params.fields[t].mime_type?this.params.fields[t].mime_type:"image"},removeImage:function(t){"use strict";var e,i;wp.customize.utils.isKeydownButNotEnterEvent(t)||(i=(e=this.$thisButton.closest(".repeater-field-image,.repeater-field-cropped_image,.repeater-field-upload")).find(".upload-button"),e.find(".kirki-image-attachment").slideUp("fast",function(){jQuery(this).show().html(jQuery(this).data("placeholder"))}),e.find(".hidden-field").val(""),i.text(i.data("label")),this.$thisButton.hide(),e.find("input, textarea, select").trigger("change"))},removeFile:function(t){"use strict";var e,i;wp.customize.utils.isKeydownButNotEnterEvent(t)||(i=(e=this.$thisButton.closest(".repeater-field-upload")).find(".upload-button"),e.find(".kirki-file-attachment").slideUp("fast",function(){jQuery(this).show().html(jQuery(this).data("placeholder"))}),e.find(".hidden-field").val(""),i.text(i.data("label")),this.$thisButton.hide(),e.find("input, textarea, select").trigger("change"))},getValue:function(){"use strict";var t=[];return t=_.isString(this.setting.get())?JSON.parse(decodeURI(this.setting.get())):this.setting.get(),JSON.parse(JSON.stringify(_.toArray(t)))},putValueInSetting:_.debounce(function(){var t=JSON.parse(JSON.stringify(this.__valueToSet));this.setting.set(t);var e=this;t.forEach(function(t,i){if(e.rows[i]){var n=e.rows[i].container;for(var r in t){var s=n.find('[data-field="'+r+'"]').val();t.hasOwnProperty(r)&&s!==t[r]&&n.find('[data-field="'+r+'"]').val(t[r]).trigger("change")}}})},300),filterValue:function(t){var e=t,i=[];return jQuery.each(this.params.fields,function(t,e){"image"!==e.type&&"cropped_image"!==e.type&&"upload"!==e.type||i.push(t)}),jQuery.each(t,function(t,n){jQuery.each(i,function(i,r){void 0!==n[r]&&void 0!==n[r].id&&(e[t][r]=n[r].id)})}),e},normalizeValue:function(t,e){if(_.isString(t)){try{t=decodeURI(t)}catch(t){}try{t=JSON.parse(t)}catch(t){}}if(_.isObject(t)&&e&&_.keys(t).map(function(t){return _.isNumber(parseInt(t))}).reduce(function(t,e){return t&&e},!0)){var i=[];_.keys(t).forEach(function(e){_.isUndefined(t[e])||i.push(t[e])}),t=i}return t},setValue:function(t,e){"use strict";this.__valueToSet=this.getValue(),e&&(t=this.filterValue(t)),this.params.choices.beforeValueSet&&window[this.params.choices.beforeValueSet]&&(t=window[this.params.choices.beforeValueSet].call(this,t)),t=this.normalizeValue(t,!0),this.__valueToSet=t,this.putValueInSetting()},addRow:function(t,e){"use strict";var i,n,r,s=this,o=s.repeaterTemplate(),a=this.getValue(),c={};if(o){if(i=jQuery.extend(!0,{},s.params.fields),t)for(r in t)t.hasOwnProperty(r)&&i.hasOwnProperty(r)&&(i[r].default=t[r]);i.index=this.currentIndex,o=o(i),(n=new RepeaterRow(s.currentIndex,jQuery(o).appendTo(s.repeaterFieldsContainer),s.params.row_label)).container.on("row:remove",function(t,e){s.deleteRow(e)}),n.container.on("row:update",function(t,e,i,r){s.updateField.call(s,t,e,i,r),n.updateLabel()}),this.rows[this.currentIndex]=n;for(r in i)i.hasOwnProperty(r)&&(c[r]=i[r].default);return e||(a[this.currentIndex]=c,this.setValue(a)),this.currentIndex++,n}},sort:function(){"use strict";var t=this,e=this.repeaterFieldsContainer.find(".repeater-row"),i=[],n=t.getValue(),r=[],s=[];e.each(function(t,e){i.push(jQuery(e).data("row"))}),jQuery.each(i,function(e,i){r[e]=t.rows[i],r[e].setRowIndex(e),s[e]=n[i]}),t.rows=r,t.setValue(s)},deleteRow:function(t){"use strict";var e,i=this.getValue();if(i[t]&&this.rows[t]&&(_.isArray(i)?i.splice(t,1):delete i[t],_.isArray(this.rows)?this.rows.splice(t,1):delete this.rows[t],i=_.omit(i,_.isNull),i=_.omit(i,_.isUndefined),this.setValue(i)),_.isArray(this.rows))this.rows.forEach(function(t,e){t.setRowIndex(e),t.updateLabel()});else{for(e in this.rows)this.rows.hasOwnProperty(e)&&this.rows[e]&&(this.rows[e].updateLabel(),0)}},updateField:function(t,e,i,n){"use strict";var r,s,o;if(this.rows[e]&&this.params.fields[i]&&(r=this.params.fields[i].type,s=this.rows[e],o=this.getValue(),n=jQuery(n),void 0!==typeof o[s.rowIndex][i])){var a=o[s.rowIndex][i];(a="checkbox"===r?n.is(":checked"):n.val())!==o[s.rowIndex][i]&&(o[s.rowIndex][i]=a,this.setValue(o))}},initColorPicker:function(){"use strict";var t=this,e=t.container.find(".color-picker-hex"),i={},n=e.data("field");void 0!==n&&void 0!==t.params.fields[n]&&void 0!==t.params.fields[n].palettes&&"object"==typeof t.params.fields[n].palettes&&(i.palettes=t.params.fields[n].palettes),i.change=function(e,i){var n=jQuery(e.target),r=n.closest(".repeater-row").data("row"),s=t.getValue();s[r][n.data("field")]=i.color.toString(),t.setValue(s)},0!==e.length&&e.wpColorPicker(i)},initDropdownPages:function(t,e){"use strict";var i,n,r=this,s=t.container.find(".repeater-dropdown-pages select");0!==s.length&&(i=jQuery(s).selectize()[0].selectize,n=s.data("field"),e&&i.setValue(e[n]),this.container.on("change",".repeater-dropdown-pages select",function(t){var e=jQuery(t.target),i=e.closest(".repeater-row").data("row"),n=r.getValue();n[i][e.data("field")]=jQuery(this).val(),r.setValue(n)}))}}),wp.customize.controlConstructor["kirki-select"]=wp.customize.Control.extend({ready:function(){"use strict";var t,e=this,i=this.container.find("select"),n=parseInt(i.data("multiple"));_.delay(function(){n>1?jQuery(i).selectize({maxItems:n,plugins:["remove_button","drag_drop"]}):jQuery(i).selectize()},50),this.container.on("change","select",function(){t=jQuery(this).val(),n>1?t=_.extend({},jQuery(this).val()):e.container.find("select").data().selectize.blur(),e.setting.set(t)})}}),wp.customize.controlConstructor["kirki-slider"]=wp.customize.Control.extend({ready:function(){"use strict";var t,e,i,n,r=this;jQuery("input[type=range]").on("mousedown",function(){t=jQuery(this).attr("value"),jQuery(this).mousemove(function(){t=jQuery(this).attr("value"),jQuery(this).closest("label").find(".kirki_range_value .value").text(t)})}),jQuery(".kirki-slider-reset").click(function(){e=jQuery(this).closest("label").find("input"),i=e.data("reset_value"),e.val(i),e.change(),jQuery(this).closest("label").find(".kirki_range_value .value").text(i)}),n="postMessage"===r.setting.transport?"mousemove change":"change",this.container.on(n,"input",function(){r.setting.set(jQuery(this).val())})}}),wp.customize.controlConstructor["kirki-sortable"]=wp.customize.Control.extend({ready:function(){"use strict";var t=this;this.settingField=this.container.find("[data-customize-setting-link]").first(),this.sortableContainer=this.container.find("ul.sortable").first(),this.setValue(this.setting.get(),!1),this.sortableContainer.sortable().disableSelection().on("sortstop",function(e,i){t.sort()}).find("li").each(function(){jQuery(this).find("i.visibility").click(function(){jQuery(this).toggleClass("dashicons-visibility-faint").parents("li:eq(0)").toggleClass("invisible")})}).click(function(){t.sort()})},sort:function(){"use strict";var t=[];this.sortableContainer.find("li").each(function(){var e=jQuery(this);e.is(".invisible")||t.push(e.data("value"))}),this.setValue(t,!0)},getValue:function(){"use strict";return unserialize(this.setting.get())},setValue:function(t,e){"use strict";var i=t;this.setting.set(i),this.settingField.val(i),e&&this.settingField.trigger("change")}}),wp.customize.controlConstructor["kirki-spacing"]=wp.customize.Control.extend({ready:function(){"use strict";var t,e=this.params.choices.controls,i={},n=[];for(_.each(e,function(t,e){!0===t&&n.push(e)}),t=0;t<n.length;t++)i[n[t]]=this.setting._value[n[t]],this.updateSpacingValue(n[t],i)},updateSpacingValue:function(t,e){var i=this,n=_.debounce(function(n){i.setting&&i.setting.get()&&(e=_.clone(i.setting.get())),e[t]=n.val(),kirkiNotifications(i.id,"kirki-spacing",i.params.kirkiConfig),i.saveValue(e)},500);i.container.on("change keyup paste","."+t+" input",function(){n(jQuery(this))})},saveValue:function(t){"use strict";var e={};_.each(t,function(t,i){e[i]=t}),this.setting.set(e)}}),wp.customize.controlConstructor["kirki-switch"]=wp.customize.Control.extend({ready:function(){"use strict";var t=this,e=t.setting._value;this.container.on("change","input",function(){e=!!jQuery(this).is(":checked"),t.setting.set(e)})}}),wp.customize.controlConstructor["kirki-toggle"]=wp.customize.Control.extend({ready:function(){"use strict";var t=this,e=t.setting._value;this.container.on("change","input",function(){e=!!jQuery(this).is(":checked"),t.setting.set(e)})}}),function(t){wp.customize.controlConstructor["kirki-typography"]=wp.customize.Control.extend({ready:function(){"use strict";var e,i,n,r=this,s=r.selector+" .font-family select",o=r.selector+" .variant select",a=r.selector+" .subsets select",c=r.selector+" .text-transform select",u=!1,l=!1,h={};function d(){return h=_.clone(r.setting._value)}t(r.selector+" .addwebfont").on("click",function(){top.wp.customize.control("web_fonts").focus()}),_.each(r.params.default,function(t,e){!1!==t&&(h[e]=t,void 0!==r.setting._value[e]&&(h[e]=r.setting._value[e]))}),_.each(r.setting._value,function(t,e){void 0!==h[e]&&void 0!==h[e]||(h[e]=t)}),i=function(t,i,n){var s,c,d,p="variant"===i?o:a,f=!1,g={};void 0!==jQuery(p).selectize()[0]&&jQuery(p).selectize()[0].selectize.destroy(),_.each(kirkiAllFonts,function(e,n){t===e.family&&(void 0!==e.isStandard&&!0===e.isStandard&&(f=!0),"variant"===i?g=e.variants:"subsets"===i&&(g=e.subsets))}),!1!==f&&"subsets"===i||(null===n?("variant"===i?_.each(g,function(t){void 0!==t.id?e=h.variant:"regular"===t.id?u=!0:!1===l&&(l=t.id)}):"subsets"===i&&(c={},_.each(g,function(t){null!==h.subsets&&_.each(h.subsets,function(e){void 0!==t&&e===t.id&&(c[e]=e)})}),0!==c.length&&(d=jQuery.map(c,function(t,e){return[t]}),e=d)),s=void 0!==e?e:!1!==u?"regular":l):s=n,jQuery(p).selectize({maxItems:"variant"===i?1:null,valueField:"id",labelField:"label",searchField:["label"],options:g,items:"variant"===i?[s]:s,create:!1,plugins:"variant"===i?"":["remove_button"],render:{item:function(t,e){return"<div>"+e(t.label)+"</div>"},option:function(t,e){return"<div>"+e(t.label)+"</div>"}}}).data("selectize")),!0===f?r.container.find(".hide-on-standard-fonts").css("display","none"):2>g.length?r.container.find(".kirki-"+i+"-wrapper").css("display","none"):r.container.find(".kirki-"+i+"-wrapper").css("display","block")},jQuery(s).selectize({options:kirkiAllFonts,items:[r.setting._value["font-family"]],persist:!1,maxItems:1,valueField:"family",labelField:"label",searchField:["family","label","subsets"],create:!1,render:{item:function(t,e){return"<div>"+e(t.label)+"</div>"},option:function(t,e){return"<div>"+e(t.label)+"</div>"}}}),i(h["font-family"],"variant",h.variant),i(h["font-family"],"subsets",h.subsets),this.container.on("change",".font-family select",function(){d(),h["font-family"]=jQuery(this).val(),r.saveValue(h),i(jQuery(this).val(),"variant",null),i(jQuery(this).val(),"subsets",null)}),this.container.on("change",".variant select",function(){d(),h.variant=jQuery(this).val(),r.saveValue(h)}),this.container.on("change",".subsets select",function(){d(),h.subsets=jQuery(this).val(),r.saveValue(h),wp.customize.previewer.refresh()}),this.container.on("change keyup paste",".font-size input",function(){d(),h["font-size"]=jQuery(this).val(),r.saveValue(h)}),this.container.on("change keyup paste",".mobile-font-size input",function(){d(),h["mobile-font-size"]=jQuery(this).val(),r.saveValue(h)}),this.container.on("change keyup paste",".line-height input",function(){d(),h["line-height"]=jQuery(this).val(),r.saveValue(h)}),this.container.on("change keyup paste",".letter-spacing input",function(){d(),h["letter-spacing"]=jQuery(this).val(),r.saveValue(h)}),this.container.on("change",".text-align input",function(){d(),h["text-align"]=jQuery(this).val(),r.saveValue(h)}),jQuery(c).selectize(),this.container.on("change",".text-transform select",function(){d(),h["text-transform"]=jQuery(this).val(),r.saveValue(h)}),(n=this.container.find(".kirki-color-control")).length&&kirki.kirkiGetColorPicker(n,function(t){(h=d()).color=t,r.saveValue(h)})},saveValue:function(t){"use strict";var e={};_.each(t,function(t,i){e[i]=t}),this.setting.set(e)}})}(jQuery);
 